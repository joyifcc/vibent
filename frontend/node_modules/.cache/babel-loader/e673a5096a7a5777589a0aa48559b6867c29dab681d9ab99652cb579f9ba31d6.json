{"ast":null,"code":"// src/components/TopArtistsList.js\nimport React,{useEffect,useState}from'react';import'./TopArtistsList.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TopArtistsList=_ref=>{let{topArtists,onShowRelatedArtists,onShowConcerts}=_ref;const[concertData,setConcertData]=useState({});const[loading,setLoading]=useState(false);const[error,setError]=useState(null);useEffect(()=>{const fetchConcerts=async()=>{setLoading(true);setError(null);const data={};for(const artist of topArtists){try{// Use the correct backend URL\nconst BACKEND_URL=process.env.REACT_APP_BACKEND_URL||'https://vibent-api.onrender.com';const url=`${BACKEND_URL}/concerts?artistName=${encodeURIComponent(artist.name)}`;console.log(`Fetching concerts from: ${url}`);const res=await fetch(url);// Check if response is OK before parsing\nif(!res.ok){console.error(`Error response for ${artist.name}: ${res.status} ${res.statusText}`);const text=await res.text();console.error(`Response body: ${text.substring(0,200)}...`);throw new Error(`API returned ${res.status}`);}const json=await res.json();console.log(`Concert data for ${artist.name}:`,json);// Make sure we're storing the events array correctly\nif(Array.isArray(json.events)){data[artist.name]=json.events;console.log(`Stored ${json.events.length} concerts for ${artist.name}`);}else{console.warn(`No events array found for ${artist.name}, response:`,json);data[artist.name]=[];}}catch(error){console.error(`Error fetching concerts for ${artist.name}:`,error);data[artist.name]=[];}}console.log(\"Final concert data:\",data);setConcertData(data);setLoading(false);};if(topArtists.length>0){fetchConcerts();}},[topArtists]);return/*#__PURE__*/_jsxs(\"div\",{className:\"top-artists-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Your Top Spotify Artists\"}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",style:{color:'red',margin:'10px 0'},children:[\"Error loading concerts: \",error]}),/*#__PURE__*/_jsx(\"ul\",{className:\"artist-list\",children:topArtists.map((artist,index)=>{var _artist$images,_artist$images$,_artist$relatedArtist;return/*#__PURE__*/_jsxs(\"li\",{className:\"artist-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:(_artist$images=artist.images)===null||_artist$images===void 0?void 0:(_artist$images$=_artist$images[0])===null||_artist$images$===void 0?void 0:_artist$images$.url,alt:artist.name,className:\"artist-img\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"artist-name\",children:artist.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"artist-popularity\",children:[\"Popularity: \",artist.popularity]}),((_artist$relatedArtist=artist.relatedArtists)===null||_artist$relatedArtist===void 0?void 0:_artist$relatedArtist.length)>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"related-artists\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"related-title\",children:\"Related Artists:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"related-list\",children:artist.relatedArtists.slice(0,3).map((rel,i)=>/*#__PURE__*/_jsx(\"li\",{className:\"related-item\",children:rel.name},i))})]}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"loading-concerts\",children:\"Loading concerts...\"}):concertData[artist.name]&&concertData[artist.name].length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"concerts\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"concert-title\",children:\"Upcoming Concerts:\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"concert-list\",children:concertData[artist.name].slice(0,2).map((event,i)=>/*#__PURE__*/_jsxs(\"li\",{className:\"concert-item\",children:[event.name,\" \\u2014 \",event.date,\" @ \",event.venue]},i))})]}):/*#__PURE__*/_jsxs(\"p\",{className:\"no-concerts\",children:[\"No concerts found\",process.env.NODE_ENV==='development'&&` (${concertData[artist.name]?'Empty array':'No data'})`]})]})]},index);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"action-buttons\",style:{display:'flex',justifyContent:'center',gap:'20px',marginTop:'30px'},children:[onShowRelatedArtists&&/*#__PURE__*/_jsx(\"button\",{className:\"show-related-button\",onClick:onShowRelatedArtists,style:{padding:'10px 20px',fontSize:'1rem',backgroundColor:'#1DB954',border:'none',borderRadius:'8px',cursor:'pointer',color:'white'},children:\"See All Related Artists\"}),onShowConcerts&&/*#__PURE__*/_jsx(\"button\",{className:\"show-concerts-button\",onClick:onShowConcerts,style:{padding:'10px 20px',fontSize:'1rem',backgroundColor:'#191414',border:'2px solid #1DB954',borderRadius:'8px',cursor:'pointer',color:'white'},children:\"Find All Concerts\"})]})]});};export default TopArtistsList;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","TopArtistsList","_ref","topArtists","onShowRelatedArtists","onShowConcerts","concertData","setConcertData","loading","setLoading","error","setError","fetchConcerts","data","artist","BACKEND_URL","process","env","REACT_APP_BACKEND_URL","url","encodeURIComponent","name","console","log","res","fetch","ok","status","statusText","text","substring","Error","json","Array","isArray","events","length","warn","className","children","style","color","margin","map","index","_artist$images","_artist$images$","_artist$relatedArtist","src","images","alt","popularity","relatedArtists","slice","rel","i","event","date","venue","NODE_ENV","display","justifyContent","gap","marginTop","onClick","padding","fontSize","backgroundColor","border","borderRadius","cursor"],"sources":["/Users/joyzhang/vibent/frontend/src/components/TopArtistsList.js"],"sourcesContent":["// src/components/TopArtistsList.js\nimport React, { useEffect, useState } from 'react';\nimport './TopArtistsList.css';\n\nconst TopArtistsList = ({ topArtists, onShowRelatedArtists, onShowConcerts }) => {\n  const [concertData, setConcertData] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchConcerts = async () => {\n      setLoading(true);\n      setError(null);\n      const data = {};\n      \n      for (const artist of topArtists) {\n        try {\n          // Use the correct backend URL\n          const BACKEND_URL = process.env.REACT_APP_BACKEND_URL || 'https://vibent-api.onrender.com';\n          const url = `${BACKEND_URL}/concerts?artistName=${encodeURIComponent(artist.name)}`;\n          \n          console.log(`Fetching concerts from: ${url}`);\n          const res = await fetch(url);\n          \n          // Check if response is OK before parsing\n          if (!res.ok) {\n            console.error(`Error response for ${artist.name}: ${res.status} ${res.statusText}`);\n            const text = await res.text();\n            console.error(`Response body: ${text.substring(0, 200)}...`);\n            throw new Error(`API returned ${res.status}`);\n          }\n          \n          const json = await res.json();\n          console.log(`Concert data for ${artist.name}:`, json);\n          \n          // Make sure we're storing the events array correctly\n          if (Array.isArray(json.events)) {\n            data[artist.name] = json.events;\n            console.log(`Stored ${json.events.length} concerts for ${artist.name}`);\n          } else {\n            console.warn(`No events array found for ${artist.name}, response:`, json);\n            data[artist.name] = [];\n          }\n        } catch (error) {\n          console.error(`Error fetching concerts for ${artist.name}:`, error);\n          data[artist.name] = [];\n        }\n      }\n      \n      console.log(\"Final concert data:\", data);\n      setConcertData(data);\n      setLoading(false);\n    };\n\n    if (topArtists.length > 0) {\n      fetchConcerts();\n    }\n  }, [topArtists]);\n\n  return (\n    <div className=\"top-artists-container\">\n      <h1 className=\"title\">Your Top Spotify Artists</h1>\n      \n      {error && (\n        <div className=\"error-message\" style={{ color: 'red', margin: '10px 0' }}>\n          Error loading concerts: {error}\n        </div>\n      )}\n\n      <ul className=\"artist-list\">\n        {topArtists.map((artist, index) => (\n          <li key={index} className=\"artist-card\">\n            <img\n              src={artist.images?.[0]?.url}\n              alt={artist.name}\n              className=\"artist-img\"\n            />\n            <div>\n              <h3 className=\"artist-name\">{artist.name}</h3>\n              <p className=\"artist-popularity\">Popularity: {artist.popularity}</p>\n\n              {/* Related Artists */}\n              {artist.relatedArtists?.length > 0 && (\n                <div className=\"related-artists\">\n                  <p className=\"related-title\">Related Artists:</p>\n                  <ul className=\"related-list\">\n                    {artist.relatedArtists.slice(0, 3).map((rel, i) => (\n                      <li key={i} className=\"related-item\">{rel.name}</li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n\n              {/* Concerts with improved handling */}\n              {loading ? (\n                <p className=\"loading-concerts\">Loading concerts...</p>\n              ) : concertData[artist.name] && concertData[artist.name].length > 0 ? (\n                <div className=\"concerts\">\n                  <p className=\"concert-title\">Upcoming Concerts:</p>\n                  <ul className=\"concert-list\">\n                    {concertData[artist.name].slice(0, 2).map((event, i) => (\n                      <li key={i} className=\"concert-item\">\n                        {event.name} â€” {event.date} @ {event.venue}\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              ) : (\n                <p className=\"no-concerts\">\n                  No concerts found\n                  {process.env.NODE_ENV === 'development' && \n                    ` (${concertData[artist.name] ? 'Empty array' : 'No data'})`}\n                </p>\n              )}\n            </div>\n          </li>\n        ))}\n      </ul>\n\n      <div className=\"action-buttons\" style={{\n        display: 'flex',\n        justifyContent: 'center',\n        gap: '20px',\n        marginTop: '30px'\n      }}>\n        {onShowRelatedArtists && (\n          <button\n            className=\"show-related-button\"\n            onClick={onShowRelatedArtists}\n            style={{\n              padding: '10px 20px',\n              fontSize: '1rem',\n              backgroundColor: '#1DB954',\n              border: 'none',\n              borderRadius: '8px',\n              cursor: 'pointer',\n              color: 'white'\n            }}\n          >\n            See All Related Artists\n          </button>\n        )}\n\n        {onShowConcerts && (\n          <button\n            className=\"show-concerts-button\"\n            onClick={onShowConcerts}\n            style={{\n              padding: '10px 20px',\n              fontSize: '1rem',\n              backgroundColor: '#191414',\n              border: '2px solid #1DB954',\n              borderRadius: '8px',\n              cursor: 'pointer',\n              color: 'white'\n            }}\n          >\n            Find All Concerts\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default TopArtistsList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}